# 面试复盘全栈Agent系统 - 设计文档

## 📚 文档概览

本目录包含面试复盘全栈Agent系统的完整设计文档，包括系统架构设计和详细开发计划。

### 文档列表

| 文档名称 | 大小 | 说明 |
|---------|------|------|
| [architecture-design.md](./architecture-design.md) | 50KB | 系统架构设计文档，涵盖技术栈、Agent工作流、数据库设计等 |
| [development-plan.md](./development-plan.md) | 23KB | 详细开发计划，包括任务分解、时间估算、资源需求等 |

---

## 🎯 项目概述

**项目名称**: Interview Replay Agent System (IRAS)
**核心功能**: 基于AI的面试录音分析和智能复盘系统

### 主要特性

1. **音频处理** - ASR转写、说话人分离、文本修正
2. **智能分析** - 基于LangGraph的复盘Agent
3. **记忆系统** - 简历、JD、历史面试记忆管理
4. **复盘报告** - 结构化的面试复盘和改进建议

---

## 🏗️ 架构设计亮点

### 技术栈

**前端**:
- Next.js 14 (App Router)
- TypeScript + Tailwind CSS
- shadcn/ui组件库
- Zustand状态管理

**后端**:
- Node.js 20 + TypeScript
- Express + Fastify
- Prisma ORM
- PostgreSQL + Redis

**AI/Agent**:
- LangGraph工作流引擎
- GPT-4 Turbo
- Pinecone向量数据库
- Azure Speech / Whisper

### 核心架构

```
前端 (Next.js)
    ↓
API Gateway
    ↓
微服务层
├── Core API Service
├── Agent Service (LangGraph)
├── ASR Service
└── Storage Service
    ↓
数据层
├── PostgreSQL (结构化数据)
├── Redis (缓存)
├── Pinecone (向量数据)
└── S3/OSS (文件存储)
```

### Agent工作流

#### 面试Agent流程
```
音频上传 → 预处理 → ASR转写 → 说话人分离
         → 文本修正 → 角色识别 → 元数据提取
```

#### 复盘Agent流程
```
加载记忆 → 自我介绍分析 → 问题识别 → 答案评估
       → 生成参考答案 → 总体评估 → 建议生成 → 报告合成
```

---

## 📋 开发计划概要

### 项目阶段 (总计65天)

| 阶段 | 周期 | 交付物 |
|------|------|--------|
| **Phase 0** - 技术准备 | 5天 | 开发环境、第三方服务配置 |
| **Phase 1** - 基础功能 | 15天 | 音频上传、ASR转写、用户认证 |
| **Phase 2** - 智能分析 | 20天 | LangGraph工作流、复盘分析 |
| **Phase 3** - 记忆系统 | 15天 | 向量数据库、知识管理 |
| **Phase 4** - 产品完善 | 10天 | UI/UX优化、部署上线 |

### 关键里程碑

- **M0** (第5天): 环境就绪
- **M1** (第20天): MVP完成
- **M2** (第40天): 智能分析上线
- **M3** (第55天): 记忆系统完成
- **M4** (第65天): 产品发布

### 团队配置建议

- **个人开发**: 约520小时 (3-4个月全职)
- **小团队 (2-3人)**: 前端 + 后端 + AI工程师
- **月度预算**: $80-270 (主要是API和云服务费用)

---

## 🚀 快速开始

### 1. 阅读架构设计

首先阅读 [architecture-design.md](./architecture-design.md)，了解：
- 系统整体架构
- 技术栈选型理由
- Agent工作流设计
- 数据库和API设计
- 扩展性和性能考虑

### 2. 查看开发计划

然后查看 [development-plan.md](./development-plan.md)，了解：
- 详细任务分解
- 时间和资源估算
- 技术准备工作
- 开发规范和最佳实践
- 风险识别和缓解措施

### 3. 技术准备

开始开发前需要：

#### 申请第三方服务
- OpenAI API密钥 (GPT-4访问)
- Azure Speech服务 (ASR转写)
- Pinecone账号 (向量数据库)

#### 搭建本地环境
```bash
# 安装Docker
docker --version

# 启动PostgreSQL
docker run -d --name postgres \
  -e POSTGRES_PASSWORD=password \
  -p 5432:5432 postgres:15

# 启动Redis
docker run -d --name redis \
  -p 6379:6379 redis:7

# 克隆项目
git clone <repository-url>
cd agent-learning-fullstack

# 安装依赖
npm install
# 或
pnpm install
```

---

## 📖 文档使用指南

### 架构设计文档使用

**适用场景**:
- ✅ 技术选型决策
- ✅ 系统设计评审
- ✅ 技术方案讨论
- ✅ 新成员技术培训

**阅读建议**:
1. 先看**整体架构**和**核心模块**
2. 根据角色关注对应章节：
   - 前端开发 → 第7章
   - 后端开发 → 第8章
   - AI工程师 → 第3章
   - 架构师 → 第1、9章
3. 技术选型依据 → 第2章
4. 扩展性考虑 → 第9章

### 开发计划文档使用

**适用场景**:
- ✅ 项目启动和规划
- ✅ 任务分配和排期
- ✅ 进度跟踪和管理
- ✅ 资源需求评估

**阅读建议**:
1. **项目经理**: 关注时间估算、资源需求、风险管理
2. **开发人员**: 关注详细任务分解、技术准备、开发规范
3. **产品经理**: 关注里程碑、交付物、功能优先级
4. **技术主管**: 关注质量保证、部署策略、技术债务

---

## 🔑 核心决策

### 为什么选择LangGraph？

✅ **优势**:
- 状态图模型清晰易懂
- 可视化工作流
- 易于调试和监控
- 与LangChain生态无缝集成

⚠️ **权衡**:
- 社区相对较小
- 学习资源有限

### 为什么使用Pinecone？

✅ **优势**:
- 托管服务，无需运维
- 向量检索性能优秀
- 易于扩展

⚠️ **权衡**:
- 成本较高（有免费层）
- Vendor lock-in风险

💡 **备选方案**: pgvector (PostgreSQL扩展), Weaviate, Qdrant

### 为什么前后端都用TypeScript？

✅ **优势**:
- 类型安全贯穿全栈
- 减少运行时错误
- 更好的IDE支持
- 代码可维护性高

---

## 📊 项目复杂度评估

### 技术难度

| 模块 | 难度 | 关键挑战 |
|------|------|----------|
| 前端UI | ⭐⭐⭐ | 音频播放器、波形可视化 |
| 后端API | ⭐⭐⭐ | 异步任务队列、错误处理 |
| Agent工作流 | ⭐⭐⭐⭐ | LangGraph状态管理、提示工程 |
| ASR集成 | ⭐⭐⭐ | 长音频处理、实时转写 |
| 记忆系统 | ⭐⭐⭐⭐ | 向量检索、混合排序 |
| 部署运维 | ⭐⭐⭐ | Kubernetes配置、监控告警 |

### 开发工作量

```
总计: 520小时 (个人开发)

前端: 160小时 (30%)
├── 页面开发: 80h
├── 组件开发: 40h
├── 状态管理: 20h
└── 集成测试: 20h

后端: 160小时 (30%)
├── API开发: 60h
├── 数据库设计: 30h
├── 任务队列: 30h
└── 测试部署: 40h

Agent: 160小时 (30%)
├── 工作流开发: 80h
├── 提示工程: 40h
├── 记忆系统: 30h
└── 测试优化: 10h

DevOps: 40小时 (10%)
├── 环境搭建: 10h
├── CI/CD: 15h
└── 监控日志: 15h
```

---

## 🎓 学习路径

### 新手入门 (适合初学者)

**前置知识**:
- JavaScript/TypeScript基础
- React基础
- Node.js基础
- HTTP协议基础

**学习顺序**:
1. Next.js官方教程 (2周)
2. Prisma ORM教程 (1周)
3. LangChain基础 (1周)
4. LangGraph入门 (1周)
5. 开始Phase 0和Phase 1

**预计周期**: 3-4个月 (含学习时间)

### 有经验开发者

**前置知识**:
- 全栈开发经验
- 微服务架构理解
- 基础AI/LLM知识

**快速启动**:
1. 阅读架构设计文档 (1天)
2. 搭建开发环境 (1天)
3. 直接进入Phase 0 (5天)
4. 按计划逐步实施

**预计周期**: 2-3个月

---

## 💡 最佳实践建议

### 开发建议

1. **渐进式开发**: 从MVP开始，逐步添加功能
2. **测试先行**: 编写测试用例，确保代码质量
3. **文档同步**: 代码变更同步更新文档
4. **Code Review**: 重要代码必须经过审查
5. **版本控制**: 合理使用Git分支和标签

### 成本优化

1. **利用免费层**:
   - Pinecone: 免费100万vectors
   - Vercel: 免费部署前端
   - Railway: 免费$5/月额度

2. **降级策略**:
   - 开发环境使用GPT-3.5
   - 本地Whisper替代Azure Speech
   - PostgreSQL + pgvector替代Pinecone

3. **缓存策略**: 充分利用Redis减少API调用

### 避坑指南

❌ **常见错误**:
1. 过早优化 - 先实现功能，再优化性能
2. 过度设计 - MVP阶段保持简单
3. 忽略测试 - 测试覆盖率保持>80%
4. 硬编码配置 - 使用环境变量

✅ **推荐做法**:
1. 使用TypeScript严格模式
2. 定义清晰的数据模型 (Zod)
3. 实现完善的错误处理
4. 添加详细的日志记录

---

## 🔧 故障排查

### 常见问题

**Q: LangGraph工作流执行失败？**
A: 检查节点状态、查看日志、验证输入输出格式

**Q: ASR转写准确率低？**
A: 检查音频质量、调整识别参数、尝试其他ASR服务

**Q: 向量检索结果不相关？**
A: 优化embedding模型、调整检索参数、增加训练数据

**Q: 数据库查询慢？**
A: 添加索引、优化查询、启用查询缓存

---

## 📞 支持和反馈

如果您在使用这些文档时遇到问题，或有改进建议，请：

1. 提交Issue到项目仓库
2. 发送邮件到项目维护者
3. 加入开发者社区讨论

---

## 📅 版本历史

| 版本 | 日期 | 更新内容 |
|------|------|----------|
| v1.0 | 2025-11-25 | 初始版本发布 |

---

## 📄 许可证

本项目文档采用 MIT 许可证。

---

**文档维护**: Claude Code
**最后更新**: 2025-11-25
**文档状态**: ✅ 已完成
